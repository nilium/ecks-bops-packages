# Template file for 'waypoint'
pkgname=waypoint
version=0.1.2
revision=1
build_style=go
go_import_path=github.com/hashicorp/waypoint
hostmakedepends="git go-bindata make"
short_desc="Tool to build, deploy, and release any application on any platform"
maintainer="Noel Cower <ncower@nil.dev>"
license="MPL-2.0"
homepage="https://www.waypointproject.io"
distfiles="https://github.com/hashicorp/waypoint/archive/v${version}.tar.gz"
checksum=20723ab3fd8dab0fc578f2ec2d8506eacbafe1b9837ab083c82f011ed1cdd226

do_build() {
	# Build waypoint-entry for the host architecture:
	go build -o ./internal/assets/ceb/ceb ./cmd/waypoint-entrypoint
	(cd internal/assets && go-bindata -pkg assets -o prod.go -tags assetsembedded ./ceb)
	CGO_ENABLED=0 go build -tags assetsembedded -o ./waypoint ./cmd/waypoint
}

do_install() {
	vlicense LICENSE
	vbin waypoint
}
